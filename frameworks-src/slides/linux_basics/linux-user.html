<div class="s-header">
  <div class="s-tag" style="background:#3a5a7a">Linux基礎</div>
  <div class="s-title">ユーザー・グループ管理</div>
  <div class="s-pg">linux-basics-04</div>
</div>
<div class="s-body">
  <div class="two-col">
    <div>
      <div class="label-sm" style="margin-bottom:6px">主要ファイル</div>
      <table class="tbl" style="font-size:10px;margin-bottom:8px">
        <tr><th>ファイル</th><th>内容</th></tr>
        <tr><td>/etc/passwd</td><td>ユーザー情報（uid, gid, home, shell）</td></tr>
        <tr><td>/etc/shadow</td><td>パスワードハッシュ（root限定）</td></tr>
        <tr><td>/etc/group</td><td>グループ情報・メンバー一覧</td></tr>
        <tr><td>/etc/sudoers</td><td>sudo権限設定（visudoで編集）</td></tr>
      </table>
      <div class="label-sm" style="margin-bottom:6px">/etc/passwd の形式</div>
      <pre style="background:#1a1814;color:#e8e0d0;padding:10px;font-size:10px;font-family:'Space Mono',monospace;line-height:1.8">alice:x:1001:1001:Alice:/home/alice:/bin/bash
│     │ │    │    │     │           └ ログインシェル
│     │ │    │    │     └ ホームディレクトリ
│     │ │    │    └ コメント（実名）
│     │ │    └ GID
│     │ └ UID
│     └ パスワード（xはshadow参照）
└ ユーザー名</pre>
    </div>
    <div>
      <div class="label-sm" style="margin-bottom:6px">ユーザー管理コマンド</div>
      <pre style="background:#1a1814;color:#e8e0d0;padding:12px;font-size:10px;font-family:'Space Mono',monospace;line-height:1.9"># ユーザー作成
useradd -m -s /bin/bash alice
# -m: ホーム作成  -s: シェル指定
passwd alice       # パスワード設定

# ユーザー変更
usermod -aG docker alice  # グループ追加
usermod -s /bin/zsh alice # シェル変更
usermod -L alice          # アカウントロック

# ユーザー削除
userdel -r alice   # -r: ホームも削除

# グループ管理
groupadd devteam
groupdel devteam
gpasswd -a alice devteam   # メンバー追加
gpasswd -d alice devteam   # メンバー削除

# 確認
id alice           # uid/gid/groups表示
groups alice       # 所属グループ
who                # ログイン中ユーザー
w                  # 詳細なログイン情報
last               # ログイン履歴

# sudo 操作
sudo command           # root権限で実行
sudo -u alice command  # aliceとして実行
sudo su -              # rootシェルに切り替え
visudo                 # sudoers編集</pre>
    </div>
  </div>
</div>
